@{
    ViewData["Title"] = "Artikli";
}

<div class="row">
    <div class="col-lg-3">
        <div style="margin-top: 20px" class="bg-white text-dark p-3 mb-3 text-center shadow-lg">
            <partial name="_ArticleFilter" model="new ArticleFilterRequest()" />
        </div>
    </div>

    <div class="col-lg-9" id="id_article_sort_div">

    </div>
</div>


@section Scripts{
    <script>

        /**
         * When the page is ready make it possible to click the filter button.
         */
        $(document).ready(function () {
            $("#confirmArticleFilter").click(function () {

                $.ajax({
                    url: "@Url.Action("Filter")",
                    method: "POST",
                    data: $("#articleFilter").serializeArray(),
                    success: OnSuccessFilterResult
                    //error: OnErrorFilter
                });
            })
        });

        /**
         * When the filter button is clicked for the first time create the sort partial view.
         * Nn subsequent click do nothing.
         */
        function OnSuccessFilterResult(){

            if (! !!document.getElementById("id_article_sort")) {
                var url = "@Url.Action("Sort")";
                $("#id_article_sort_div").load(url, null);
            }
            console.log(JSON.stringify($('#articleFilter').serializeArray()));
        }

        //const labels = [
        //    'January',
        //    'February',
        //    'March',
        //    'April',
        //    'May',
        //    'June',
        //];

        //const data = {
        //    labels: labels,
        //    datasets: [{
        //        label: 'My First dataset',
        //        backgroundColor: 'rgb(255, 99, 132)',
        //        borderColor: 'rgb(255, 99, 132)',
        //        data: [0, 10, 5, 2, 20, 30, 45],
        //    }]
        //};

        //const config = {
        //    type: 'line',
        //    data: data,
        //    options: {}
        //};

        //const myChart = new Chart(
        //    document.getElementById('myChart'),
        //    config
        //);

        //$("id_article_filter").on("click", "#SaveCity", function (event) {

        //    $("#TestForm").removeData('validator');
        //    $("#TestForm").removeData('unobtrusiveValidation');
        //    $.validator.unobtrusive.parse("#TestForm");

        //    $("#TestForm").validate();

        //    if ($("#TestForm").valid()) {
        //        $("#myModal").modal("hide");
        //    }

        //});



    </script>
}
